# Kinect Point Cloud Viewer

このプロジェクトは、Azure Kinect を使用して深度データとカラーデータを取得し、3Dポイントクラウドとして表示するためのUnityアプリケーションです。

## 機能

- Azure Kinect からのデータキャプチャ
- 深度画像の処理（中央値フィルタリング）
- 3Dポイントクラウドの生成と表示
- ポイントクラウドの表示設定（サイズ・色）のリアルタイム調整

## セットアップ方法

1. Unity 2019.4 以降で開きます
2. Azure Kinect SDK をインストールします
3. Kinect デバイスを接続します
4. シーンを実行します

## 使用方法

### データキャプチャ

1. アプリケーションを起動すると、自動的にKinectデバイスからのキャプチャが開始されます
2. 設定された時間（デフォルト10秒）の間、フレームがキャプチャされます
3. キャプチャされたフレームは自動的に処理され、ポイントクラウドとして表示されます

### ポイントクラウド表示の調整

画面右上に表示されるコントロールパネルを使用して、ポイントクラウドの表示設定を調整できます：

- **点のサイズ**: スライダーを使用して点のサイズを調整します（0.001〜0.1の範囲）
- **点の色**: RGBスライダーを使用して点の色を調整します

## トラブルシューティング

### ポイントクラウドのサイズが調整できない場合

1. シェーダーが `_PointSize` プロパティをサポートしていることを確認してください
2. `DynamicPointCloudController` の `pointCloudShader` または `pointCloudMaterial` が正しく設定されていることを確認してください
3. 問題が解決しない場合は、以下の手順を試してください：
   - シーンに `PointCloudUISetup` コンポーネントを追加し、`pointCloudController` 参照を設定します
   - これにより、ポイントクラウドの設定を調整するためのUIが自動的に作成されます

## 技術的な詳細

- ポイントクラウドの生成には、深度画像とカラー画像を組み合わせて使用しています
- 深度画像はグレースケールとして保存され、各ピクセルの明るさが深度値を表します
- カラー画像は深度カメラの座標系に変換されています
- ポイントクラウドの表示には、カスタムシェーダーを使用しています 